import * as actions from '../constants/actionTypes';
import initialState from './initialState';
import MockDate from 'mockdate';

import reducer from './weatherReducer';

describe('Reducers::weatherReducer', () => {
  let lastUpdatedAt;
  beforeAll(() => {
    MockDate.set(new Date());
    lastUpdatedAt = Math.floor(Date.now() / 1000);
  });
  afterAll(() => MockDate.reset());
  const getInitialState = () => {
    return initialState.weather;
  };

  it('should set initial state by default', () => {
    const action = { type: 'unknown' };
    const expected = getInitialState();

    expect(reducer(undefined, action)).toEqual(expected);
  });

  it('should handle WEATHER_FETCH_BEGIN', () => {
    const action = { type: actions.WEATHER_FETCH_BEGIN };
    const expected = { ...getInitialState(), loading: true, error: false };

    expect(reducer(getInitialState(), action)).toEqual(expected);
  });
  it('should handle WEATHER_FETCH_SUCCESS', () => {
    const mockResponse =
      '{"cod":"200","message":0,"cnt":40,"list":[{"dt":1606435200,"main":{"temp":17.52,"feels_like":18.31,"temp_min":17.01,"temp_max":17.52,"pressure":1014,"sea_level":1014,"grnd_level":912,"humidity":95,"temp_kf":0.51},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":92},"wind":{"speed":2.11,"deg":355},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 00:00:00"},{"dt":1606446000,"main":{"temp":18.27,"feels_like":17.26,"temp_min":18.27,"temp_max":18.35,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":88,"temp_kf":-0.08},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":85},"wind":{"speed":4.42,"deg":352},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-27 03:00:00"},{"dt":1606456800,"main":{"temp":21.22,"feels_like":20.67,"temp_min":21.22,"temp_max":21.44,"pressure":1014,"sea_level":1014,"grnd_level":915,"humidity":78,"temp_kf":-0.22},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":71},"wind":{"speed":4.32,"deg":10},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-27 06:00:00"},{"dt":1606467600,"main":{"temp":20.82,"feels_like":19.51,"temp_min":20.82,"temp_max":20.84,"pressure":1010,"sea_level":1010,"grnd_level":912,"humidity":80,"temp_kf":-0.02},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":95},"wind":{"speed":5.41,"deg":13},"visibility":10000,"pop":0.21,"rain":{"3h":0.17},"sys":{"pod":"d"},"dt_txt":"2020-11-27 09:00:00"},{"dt":1606478400,"main":{"temp":19.66,"feels_like":19.33,"temp_min":19.66,"temp_max":19.66,"pressure":1012,"sea_level":1012,"grnd_level":913,"humidity":83,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":83},"wind":{"speed":3.69,"deg":352},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-27 12:00:00"},{"dt":1606489200,"main":{"temp":18.62,"feels_like":19.19,"temp_min":18.62,"temp_max":18.62,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":85,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":92},"wind":{"speed":2.05,"deg":353},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 15:00:00"},{"dt":1606500000,"main":{"temp":18.37,"feels_like":19.06,"temp_min":18.37,"temp_max":18.37,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":87,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":93},"wind":{"speed":1.94,"deg":337},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 18:00:00"},{"dt":1606510800,"main":{"temp":17.93,"feels_like":18.29,"temp_min":17.93,"temp_max":17.93,"pressure":1013,"sea_level":1013,"grnd_level":913,"humidity":89,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":88},"wind":{"speed":2.37,"deg":337},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 21:00:00"},{"dt":1606521600,"main":{"temp":16.08,"feels_like":16.13,"temp_min":16.08,"temp_max":16.08,"pressure":1013,"sea_level":1013,"grnd_level":912,"humidity":96,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":50},"wind":{"speed":2.47,"deg":346},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-28 00:00:00"},{"dt":1606532400,"main":{"temp":19.45,"feels_like":19.78,"temp_min":19.45,"temp_max":19.45,"pressure":1015,"sea_level":1015,"grnd_level":916,"humidity":87,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":{"all":43},"wind":{"speed":3.06,"deg":37},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-28 03:00:00"},{"dt":1606543200,"main":{"temp":21.23,"feels_like":21.47,"temp_min":21.23,"temp_max":21.23,"pressure":1014,"sea_level":1014,"grnd_level":915,"humidity":82,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":64},"wind":{"speed":3.67,"deg":93},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-28 06:00:00"},{"dt":1606554000,"main":{"temp":22.07,"feels_like":22.34,"temp_min":22.07,"temp_max":22.07,"pressure":1011,"sea_level":1011,"grnd_level":913,"humidity":79,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":3.76,"deg":103},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-28 09:00:00"},{"dt":1606564800,"main":{"temp":20.47,"feels_like":21.58,"temp_min":20.47,"temp_max":20.47,"pressure":1012,"sea_level":1012,"grnd_level":913,"humidity":88,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":95},"wind":{"speed":2.66,"deg":92},"visibility":10000,"pop":0.21,"rain":{"3h":0.13},"sys":{"pod":"d"},"dt_txt":"2020-11-28 12:00:00"},{"dt":1606575600,"main":{"temp":18.12,"feels_like":18.71,"temp_min":18.12,"temp_max":18.12,"pressure":1016,"sea_level":1016,"grnd_level":915,"humidity":96,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":8},"wind":{"speed":2.83,"deg":82},"visibility":10000,"pop":0.01,"sys":{"pod":"n"},"dt_txt":"2020-11-28 15:00:00"},{"dt":1606586400,"main":{"temp":17.8,"feels_like":18.09,"temp_min":17.8,"temp_max":17.8,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":99,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}],"clouds":{"all":17},"wind":{"speed":3.36,"deg":80},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-28 18:00:00"},{"dt":1606597200,"main":{"temp":17.3,"feels_like":17.46,"temp_min":17.3,"temp_max":17.3,"pressure":1014,"sea_level":1014,"grnd_level":913,"humidity":100,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":44},"wind":{"speed":3.35,"deg":73},"visibility":499,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-28 21:00:00"},{"dt":1606608000,"main":{"temp":17.59,"feels_like":17.56,"temp_min":17.59,"temp_max":17.59,"pressure":1014,"sea_level":1014,"grnd_level":914,"humidity":96,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":68},"wind":{"speed":3.41,"deg":72},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-29 00:00:00"},{"dt":1606618800,"main":{"temp":19.91,"feels_like":19.78,"temp_min":19.91,"temp_max":19.91,"pressure":1016,"sea_level":1016,"grnd_level":916,"humidity":91,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":81},"wind":{"speed":4.42,"deg":77},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-29 03:00:00"},{"dt":1606629600,"main":{"temp":22.85,"feels_like":22.55,"temp_min":22.85,"temp_max":22.85,"pressure":1015,"sea_level":1015,"grnd_level":916,"humidity":80,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":86},"wind":{"speed":5.19,"deg":84},"visibility":10000,"pop":0.32,"rain":{"3h":0.14},"sys":{"pod":"d"},"dt_txt":"2020-11-29 06:00:00"},{"dt":1606640400,"main":{"temp":21.59,"feels_like":21.36,"temp_min":21.59,"temp_max":21.59,"pressure":1011,"sea_level":1011,"grnd_level":913,"humidity":86,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":92},"wind":{"speed":5.04,"deg":70},"visibility":10000,"pop":0.96,"rain":{"3h":1.36},"sys":{"pod":"d"},"dt_txt":"2020-11-29 09:00:00"},{"dt":1606651200,"main":{"temp":21.08,"feels_like":21.09,"temp_min":21.08,"temp_max":21.08,"pressure":1012,"sea_level":1012,"grnd_level":913,"humidity":89,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":86},"wind":{"speed":4.73,"deg":78},"visibility":10000,"pop":1,"rain":{"3h":0.67},"sys":{"pod":"d"},"dt_txt":"2020-11-29 12:00:00"},{"dt":1606662000,"main":{"temp":18.83,"feels_like":18.82,"temp_min":18.83,"temp_max":18.83,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":99,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":86},"wind":{"speed":4.42,"deg":80},"visibility":10000,"pop":0.31,"sys":{"pod":"n"},"dt_txt":"2020-11-29 15:00:00"},{"dt":1606672800,"main":{"temp":18.3,"feels_like":17.84,"temp_min":18.3,"temp_max":18.3,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":97,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":88},"wind":{"speed":4.54,"deg":73},"visibility":10000,"pop":0.15,"sys":{"pod":"n"},"dt_txt":"2020-11-29 18:00:00"},{"dt":1606683600,"main":{"temp":17.16,"feels_like":17.11,"temp_min":17.16,"temp_max":17.16,"pressure":1013,"sea_level":1013,"grnd_level":913,"humidity":99,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":89},"wind":{"speed":3.47,"deg":69},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-29 21:00:00"},{"dt":1606694400,"main":{"temp":16.36,"feels_like":16.84,"temp_min":16.36,"temp_max":16.36,"pressure":1013,"sea_level":1013,"grnd_level":913,"humidity":99,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":93},"wind":{"speed":2.26,"deg":61},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-30 00:00:00"},{"dt":1606705200,"main":{"temp":19.15,"feels_like":18.52,"temp_min":19.15,"temp_max":19.15,"pressure":1015,"sea_level":1015,"grnd_level":916,"humidity":89,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":4.47,"deg":77},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-30 03:00:00"},{"dt":1606716000,"main":{"temp":21.8,"feels_like":21.1,"temp_min":21.8,"temp_max":21.8,"pressure":1014,"sea_level":1014,"grnd_level":916,"humidity":79,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":4.99,"deg":76},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-30 06:00:00"},{"dt":1606726800,"main":{"temp":23.25,"feels_like":22.5,"temp_min":23.25,"temp_max":23.25,"pressure":1012,"sea_level":1012,"grnd_level":913,"humidity":73,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":91},"wind":{"speed":5.14,"deg":72},"visibility":10000,"pop":0.07,"sys":{"pod":"d"},"dt_txt":"2020-11-30 09:00:00"},{"dt":1606737600,"main":{"temp":21.19,"feels_like":21.52,"temp_min":21.19,"temp_max":21.19,"pressure":1013,"sea_level":1013,"grnd_level":914,"humidity":83,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":85},"wind":{"speed":3.64,"deg":50},"visibility":10000,"pop":0.26,"rain":{"3h":0.12},"sys":{"pod":"d"},"dt_txt":"2020-11-30 12:00:00"},{"dt":1606748400,"main":{"temp":18.32,"feels_like":18.83,"temp_min":18.32,"temp_max":18.32,"pressure":1016,"sea_level":1016,"grnd_level":915,"humidity":95,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":95},"wind":{"speed":2.96,"deg":51},"visibility":10000,"pop":0.01,"sys":{"pod":"n"},"dt_txt":"2020-11-30 15:00:00"},{"dt":1606759200,"main":{"temp":17.08,"feels_like":17.39,"temp_min":17.08,"temp_max":17.08,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":97,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":98},"wind":{"speed":2.73,"deg":52},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-30 18:00:00"},{"dt":1606770000,"main":{"temp":16.31,"feels_like":16.46,"temp_min":16.31,"temp_max":16.31,"pressure":1013,"sea_level":1013,"grnd_level":913,"humidity":97,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":2.54,"deg":42},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-30 21:00:00"},{"dt":1606780800,"main":{"temp":15.63,"feels_like":15.19,"temp_min":15.63,"temp_max":15.63,"pressure":1014,"sea_level":1014,"grnd_level":913,"humidity":97,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":94},"wind":{"speed":3.01,"deg":41},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-12-01 00:00:00"},{"dt":1606791600,"main":{"temp":18.79,"feels_like":17.52,"temp_min":18.79,"temp_max":18.79,"pressure":1016,"sea_level":1016,"grnd_level":916,"humidity":84,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":99},"wind":{"speed":4.67,"deg":50},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-12-01 03:00:00"},{"dt":1606802400,"main":{"temp":23.3,"feels_like":21.6,"temp_min":23.3,"temp_max":23.3,"pressure":1014,"sea_level":1014,"grnd_level":916,"humidity":65,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":81},"wind":{"speed":5.45,"deg":57},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-12-01 06:00:00"},{"dt":1606813200,"main":{"temp":23.8,"feels_like":21.62,"temp_min":23.8,"temp_max":23.8,"pressure":1011,"sea_level":1011,"grnd_level":913,"humidity":62,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":77},"wind":{"speed":5.99,"deg":54},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-12-01 09:00:00"},{"dt":1606824000,"main":{"temp":19.91,"feels_like":19.32,"temp_min":19.91,"temp_max":19.91,"pressure":1012,"sea_level":1012,"grnd_level":913,"humidity":83,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":89},"wind":{"speed":4.21,"deg":52},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-12-01 12:00:00"},{"dt":1606834800,"main":{"temp":17.79,"feels_like":16.57,"temp_min":17.79,"temp_max":17.79,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":91,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":4.74,"deg":45},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-12-01 15:00:00"},{"dt":1606845600,"main":{"temp":16.53,"feels_like":15.19,"temp_min":16.53,"temp_max":16.53,"pressure":1015,"sea_level":1015,"grnd_level":914,"humidity":88,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":98},"wind":{"speed":3.98,"deg":35},"visibility":10000,"pop":0.06,"sys":{"pod":"n"},"dt_txt":"2020-12-01 18:00:00"},{"dt":1606856400,"main":{"temp":16.42,"feels_like":14.95,"temp_min":16.42,"temp_max":16.42,"pressure":1012,"sea_level":1012,"grnd_level":912,"humidity":89,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":86},"wind":{"speed":4.21,"deg":31},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-12-01 21:00:00"}],"city":{"id":1269934,"name":"Hosūr","coord":{"lat":12.7167,"lon":77.8167},"country":"IN","population":103724,"timezone":19800,"sunrise":1606438380,"sunset":1606479613},"lastUpdatedAt":1606424443}';
    const weatherData = JSON.parse(mockResponse);
    const mockDayWiseWeather =
      '{"November 27, 2020":[{"dt":1606435200,"main":{"temp":17.52,"feels_like":18.31,"temp_min":17.01,"temp_max":17.52,"pressure":1014,"sea_level":1014,"grnd_level":912,"humidity":95,"temp_kf":0.51},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":92},"wind":{"speed":2.11,"deg":355},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 00:00:00"},{"dt":1606446000,"main":{"temp":18.27,"feels_like":17.26,"temp_min":18.27,"temp_max":18.35,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":88,"temp_kf":-0.08},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":85},"wind":{"speed":4.42,"deg":352},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-27 03:00:00"},{"dt":1606456800,"main":{"temp":21.22,"feels_like":20.67,"temp_min":21.22,"temp_max":21.44,"pressure":1014,"sea_level":1014,"grnd_level":915,"humidity":78,"temp_kf":-0.22},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":71},"wind":{"speed":4.32,"deg":10},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-27 06:00:00"},{"dt":1606467600,"main":{"temp":20.82,"feels_like":19.51,"temp_min":20.82,"temp_max":20.84,"pressure":1010,"sea_level":1010,"grnd_level":912,"humidity":80,"temp_kf":-0.02},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":95},"wind":{"speed":5.41,"deg":13},"visibility":10000,"pop":0.21,"rain":{"3h":0.17},"sys":{"pod":"d"},"dt_txt":"2020-11-27 09:00:00"},{"dt":1606478400,"main":{"temp":19.66,"feels_like":19.33,"temp_min":19.66,"temp_max":19.66,"pressure":1012,"sea_level":1012,"grnd_level":913,"humidity":83,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":83},"wind":{"speed":3.69,"deg":352},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-27 12:00:00"},{"dt":1606489200,"main":{"temp":18.62,"feels_like":19.19,"temp_min":18.62,"temp_max":18.62,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":85,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":92},"wind":{"speed":2.05,"deg":353},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 15:00:00"},{"dt":1606500000,"main":{"temp":18.37,"feels_like":19.06,"temp_min":18.37,"temp_max":18.37,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":87,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":93},"wind":{"speed":1.94,"deg":337},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 18:00:00"}],"November 28, 2020":[{"dt":1606510800,"main":{"temp":17.93,"feels_like":18.29,"temp_min":17.93,"temp_max":17.93,"pressure":1013,"sea_level":1013,"grnd_level":913,"humidity":89,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":88},"wind":{"speed":2.37,"deg":337},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 21:00:00"},{"dt":1606521600,"main":{"temp":16.08,"feels_like":16.13,"temp_min":16.08,"temp_max":16.08,"pressure":1013,"sea_level":1013,"grnd_level":912,"humidity":96,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":50},"wind":{"speed":2.47,"deg":346},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-28 00:00:00"},{"dt":1606532400,"main":{"temp":19.45,"feels_like":19.78,"temp_min":19.45,"temp_max":19.45,"pressure":1015,"sea_level":1015,"grnd_level":916,"humidity":87,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":{"all":43},"wind":{"speed":3.06,"deg":37},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-28 03:00:00"},{"dt":1606543200,"main":{"temp":21.23,"feels_like":21.47,"temp_min":21.23,"temp_max":21.23,"pressure":1014,"sea_level":1014,"grnd_level":915,"humidity":82,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":64},"wind":{"speed":3.67,"deg":93},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-28 06:00:00"},{"dt":1606554000,"main":{"temp":22.07,"feels_like":22.34,"temp_min":22.07,"temp_max":22.07,"pressure":1011,"sea_level":1011,"grnd_level":913,"humidity":79,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":3.76,"deg":103},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-28 09:00:00"},{"dt":1606564800,"main":{"temp":20.47,"feels_like":21.58,"temp_min":20.47,"temp_max":20.47,"pressure":1012,"sea_level":1012,"grnd_level":913,"humidity":88,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":95},"wind":{"speed":2.66,"deg":92},"visibility":10000,"pop":0.21,"rain":{"3h":0.13},"sys":{"pod":"d"},"dt_txt":"2020-11-28 12:00:00"},{"dt":1606575600,"main":{"temp":18.12,"feels_like":18.71,"temp_min":18.12,"temp_max":18.12,"pressure":1016,"sea_level":1016,"grnd_level":915,"humidity":96,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":8},"wind":{"speed":2.83,"deg":82},"visibility":10000,"pop":0.01,"sys":{"pod":"n"},"dt_txt":"2020-11-28 15:00:00"},{"dt":1606586400,"main":{"temp":17.8,"feels_like":18.09,"temp_min":17.8,"temp_max":17.8,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":99,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}],"clouds":{"all":17},"wind":{"speed":3.36,"deg":80},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-28 18:00:00"}],"November 29, 2020":[{"dt":1606597200,"main":{"temp":17.3,"feels_like":17.46,"temp_min":17.3,"temp_max":17.3,"pressure":1014,"sea_level":1014,"grnd_level":913,"humidity":100,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":44},"wind":{"speed":3.35,"deg":73},"visibility":499,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-28 21:00:00"},{"dt":1606608000,"main":{"temp":17.59,"feels_like":17.56,"temp_min":17.59,"temp_max":17.59,"pressure":1014,"sea_level":1014,"grnd_level":914,"humidity":96,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":68},"wind":{"speed":3.41,"deg":72},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-29 00:00:00"},{"dt":1606618800,"main":{"temp":19.91,"feels_like":19.78,"temp_min":19.91,"temp_max":19.91,"pressure":1016,"sea_level":1016,"grnd_level":916,"humidity":91,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":81},"wind":{"speed":4.42,"deg":77},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-29 03:00:00"},{"dt":1606629600,"main":{"temp":22.85,"feels_like":22.55,"temp_min":22.85,"temp_max":22.85,"pressure":1015,"sea_level":1015,"grnd_level":916,"humidity":80,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":86},"wind":{"speed":5.19,"deg":84},"visibility":10000,"pop":0.32,"rain":{"3h":0.14},"sys":{"pod":"d"},"dt_txt":"2020-11-29 06:00:00"},{"dt":1606640400,"main":{"temp":21.59,"feels_like":21.36,"temp_min":21.59,"temp_max":21.59,"pressure":1011,"sea_level":1011,"grnd_level":913,"humidity":86,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":92},"wind":{"speed":5.04,"deg":70},"visibility":10000,"pop":0.96,"rain":{"3h":1.36},"sys":{"pod":"d"},"dt_txt":"2020-11-29 09:00:00"},{"dt":1606651200,"main":{"temp":21.08,"feels_like":21.09,"temp_min":21.08,"temp_max":21.08,"pressure":1012,"sea_level":1012,"grnd_level":913,"humidity":89,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":86},"wind":{"speed":4.73,"deg":78},"visibility":10000,"pop":1,"rain":{"3h":0.67},"sys":{"pod":"d"},"dt_txt":"2020-11-29 12:00:00"},{"dt":1606662000,"main":{"temp":18.83,"feels_like":18.82,"temp_min":18.83,"temp_max":18.83,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":99,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":86},"wind":{"speed":4.42,"deg":80},"visibility":10000,"pop":0.31,"sys":{"pod":"n"},"dt_txt":"2020-11-29 15:00:00"},{"dt":1606672800,"main":{"temp":18.3,"feels_like":17.84,"temp_min":18.3,"temp_max":18.3,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":97,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":88},"wind":{"speed":4.54,"deg":73},"visibility":10000,"pop":0.15,"sys":{"pod":"n"},"dt_txt":"2020-11-29 18:00:00"}],"November 30, 2020":[{"dt":1606683600,"main":{"temp":17.16,"feels_like":17.11,"temp_min":17.16,"temp_max":17.16,"pressure":1013,"sea_level":1013,"grnd_level":913,"humidity":99,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":89},"wind":{"speed":3.47,"deg":69},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-29 21:00:00"},{"dt":1606694400,"main":{"temp":16.36,"feels_like":16.84,"temp_min":16.36,"temp_max":16.36,"pressure":1013,"sea_level":1013,"grnd_level":913,"humidity":99,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":93},"wind":{"speed":2.26,"deg":61},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-30 00:00:00"},{"dt":1606705200,"main":{"temp":19.15,"feels_like":18.52,"temp_min":19.15,"temp_max":19.15,"pressure":1015,"sea_level":1015,"grnd_level":916,"humidity":89,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":4.47,"deg":77},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-30 03:00:00"},{"dt":1606716000,"main":{"temp":21.8,"feels_like":21.1,"temp_min":21.8,"temp_max":21.8,"pressure":1014,"sea_level":1014,"grnd_level":916,"humidity":79,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":4.99,"deg":76},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-30 06:00:00"},{"dt":1606726800,"main":{"temp":23.25,"feels_like":22.5,"temp_min":23.25,"temp_max":23.25,"pressure":1012,"sea_level":1012,"grnd_level":913,"humidity":73,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":91},"wind":{"speed":5.14,"deg":72},"visibility":10000,"pop":0.07,"sys":{"pod":"d"},"dt_txt":"2020-11-30 09:00:00"},{"dt":1606737600,"main":{"temp":21.19,"feels_like":21.52,"temp_min":21.19,"temp_max":21.19,"pressure":1013,"sea_level":1013,"grnd_level":914,"humidity":83,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":85},"wind":{"speed":3.64,"deg":50},"visibility":10000,"pop":0.26,"rain":{"3h":0.12},"sys":{"pod":"d"},"dt_txt":"2020-11-30 12:00:00"},{"dt":1606748400,"main":{"temp":18.32,"feels_like":18.83,"temp_min":18.32,"temp_max":18.32,"pressure":1016,"sea_level":1016,"grnd_level":915,"humidity":95,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":95},"wind":{"speed":2.96,"deg":51},"visibility":10000,"pop":0.01,"sys":{"pod":"n"},"dt_txt":"2020-11-30 15:00:00"},{"dt":1606759200,"main":{"temp":17.08,"feels_like":17.39,"temp_min":17.08,"temp_max":17.08,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":97,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":98},"wind":{"speed":2.73,"deg":52},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-30 18:00:00"}],"December 1, 2020":[{"dt":1606770000,"main":{"temp":16.31,"feels_like":16.46,"temp_min":16.31,"temp_max":16.31,"pressure":1013,"sea_level":1013,"grnd_level":913,"humidity":97,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":2.54,"deg":42},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-30 21:00:00"},{"dt":1606780800,"main":{"temp":15.63,"feels_like":15.19,"temp_min":15.63,"temp_max":15.63,"pressure":1014,"sea_level":1014,"grnd_level":913,"humidity":97,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":94},"wind":{"speed":3.01,"deg":41},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-12-01 00:00:00"},{"dt":1606791600,"main":{"temp":18.79,"feels_like":17.52,"temp_min":18.79,"temp_max":18.79,"pressure":1016,"sea_level":1016,"grnd_level":916,"humidity":84,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":99},"wind":{"speed":4.67,"deg":50},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-12-01 03:00:00"},{"dt":1606802400,"main":{"temp":23.3,"feels_like":21.6,"temp_min":23.3,"temp_max":23.3,"pressure":1014,"sea_level":1014,"grnd_level":916,"humidity":65,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":81},"wind":{"speed":5.45,"deg":57},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-12-01 06:00:00"},{"dt":1606813200,"main":{"temp":23.8,"feels_like":21.62,"temp_min":23.8,"temp_max":23.8,"pressure":1011,"sea_level":1011,"grnd_level":913,"humidity":62,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":77},"wind":{"speed":5.99,"deg":54},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-12-01 09:00:00"},{"dt":1606824000,"main":{"temp":19.91,"feels_like":19.32,"temp_min":19.91,"temp_max":19.91,"pressure":1012,"sea_level":1012,"grnd_level":913,"humidity":83,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":89},"wind":{"speed":4.21,"deg":52},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-12-01 12:00:00"},{"dt":1606834800,"main":{"temp":17.79,"feels_like":16.57,"temp_min":17.79,"temp_max":17.79,"pressure":1015,"sea_level":1015,"grnd_level":915,"humidity":91,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":4.74,"deg":45},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-12-01 15:00:00"},{"dt":1606845600,"main":{"temp":16.53,"feels_like":15.19,"temp_min":16.53,"temp_max":16.53,"pressure":1015,"sea_level":1015,"grnd_level":914,"humidity":88,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":98},"wind":{"speed":3.98,"deg":35},"visibility":10000,"pop":0.06,"sys":{"pod":"n"},"dt_txt":"2020-12-01 18:00:00"}],"December 2, 2020":[{"dt":1606856400,"main":{"temp":16.42,"feels_like":14.95,"temp_min":16.42,"temp_max":16.42,"pressure":1012,"sea_level":1012,"grnd_level":912,"humidity":89,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":86},"wind":{"speed":4.21,"deg":31},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-12-01 21:00:00"}]}';
    const dayWiseWeather = JSON.parse(mockDayWiseWeather);
    const action = {
      type: actions.WEATHER_FETCH_SUCCESS,
      payload: { weatherData },
    };
    const expected = {
      ...getInitialState(),
      loading: false,
      weatherData: {
        ...weatherData,
        lastUpdatedAt,
      },
      error: false,
      dayWiseWeather,
    };
    expect(reducer(getInitialState(), action)).toEqual(expected);
  });
  it('should handle WEATHER_FETCH_FAILURE', () => {
    const action = {
      type: actions.WEATHER_FETCH_FAILURE,
      payload: { error: {} },
    };
    const expected = {
      ...getInitialState(),
      loading: false,
      error: true,
      errorData: {},
    };

    expect(reducer(getInitialState(), action)).toEqual(expected);
  });
});
